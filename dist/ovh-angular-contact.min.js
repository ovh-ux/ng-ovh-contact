/*! ovh-angular-contact - 0.1.1 - 2017-07-05 */
!function(){"use strict";angular.module("ovh-angular-contact",["ovh-api-services","ui.select","internationalPhoneNumber","pascalprecht.translate"])}(),angular.module("ovh-angular-contact").controller("OvhContactChoiceCtrl",["$q","ovhContact",function(a,b){"use strict";function c(){d.options=_.defaults(d.options||{},{allowCreation:!0,allowEdition:!0,autoCreateContact:!0})}var d=this;d.loading={init:!1},d.list=null,d.searchInList=function(a){return a?_.filter(d.list,function(b){return b.firstName.toLowerCase().indexOf(a.toLowerCase())||b.lastName.toLowerCase().indexOf(a.toLowerCase())}):d.list},d.editContact=function(){d.ovhContactCtrl.contact.startEdition()},d.createContact=function(){d.ovhContactCtrl.startContactCreation().startEdition()},d.$onInit=function(){var e=a.when(!0);return d.loading.init=!0,d.ovhContactCtrl.loading.load=!0,c(),d.customList?(d.list=_.sortBy(d.filter&&_.isFunction(d.filter())?d.filter()(d.customList):d.customList,"lastName"),d.ovhContactCtrl.contact=d.list[0]):e=b.getContactList().then(function(a){d.list=_.sortBy(d.filter&&_.isFunction(d.filter())?d.filter()(a):a,"lastName"),!d.ovhContactCtrl.contact&&0===d.list.length&&d.options.autoCreateContact?e=b.convertConnectedUserToContact().then(function(a){return a.create().then(function(){b.addContact(a),d.ovhContactCtrl.contact=a})}):d.ovhContactCtrl.contact?_.find(d.list,{id:d.ovhContactCtrl.contact.id})||(d.ovhContactCtrl.contact=d.list[0]):e=b.getConnectedUser().then(function(a){d.ovhContactCtrl.contact=_.find(d.list,{lastName:a.name,firstName:a.firstname,email:a.email})||d.list[0]})}),e.then(d.ovhContactCtrl.manageOnInit)["finally"](function(){d.loading.init=!1,d.ovhContactCtrl.loading.load=!1})}}]),function(){"use strict";angular.module("ovh-angular-contact").component("ovhContactChoice",{transclude:!0,require:{ovhContactCtrl:"^ovhContact"},templateUrl:"choice/ovh-angular-contact-choice.html",controller:"OvhContactChoiceCtrl",bindings:{filter:"&?ovhContactChoiceFilter",customList:"=?ovhContactChoiceCustomList",options:"=?ovhContactChoiceOptions"}})}(),angular.module("ovh-angular-contact").controller("OvhContactEditCtrl",["$q","$timeout","$anchorScroll","ovhContact","OvhContact","CONTACT_EDITION",function(a,b,c,d,e,f){"use strict";function g(){i.saveError=null,i.sortedFieldsByCountry=f["SORTED_FIELDS_"+i.ovhContactCtrl.contact.country]||f.SORTED_FIELDS_DEFAULT,j=f["ALWAYS_VISIBLE_FIELDS_"+i.ovhContactCtrl.contact.country]||f.ALWAYS_VISIBLE_FIELDS_DEFAULT}function h(a){return a?a.replace(".",""):a}var i=this,j=!1;i.loading={init:!1},i.datepicker={open:!1,format:"shortDate",options:{showWeeks:!1,maxDate:moment()}},i.creationRules=null,i.sortedFieldsByCountry=null,i.saveError=null,i.cancelEdition=function(){i.ovhContactCtrl.contact.id?i.ovhContactCtrl.contact.stopEdition(!0):i.ovhContactCtrl.stopContactCreation(),c()},i.saveContact=function(){var a;return i.ovhContactCtrl.loading.load=!0,a=i.ovhContactCtrl.contact.id?i.ovhContactCtrl.contact.save():i.ovhContactCtrl.contact.create().then(function(){return d.addContact(i.ovhContactCtrl.contact)}),a.then(function(){i.ovhContactCtrl.contact.stopEdition()},function(a){i.saveError=a,c()})["finally"](function(){i.ovhContactCtrl.loading.load=!1})},i.isVisibleField=function(a){var b=!(!i.creationRules||!i.creationRules[a]||0!==i.creationRules[a].canBeNull);return b||j.indexOf(a)===-1||(b=!0),b||(i.ovhContactCtrl.contact[a]=null),b},i.getFieldType=function(a){return/mail/i.test(a)?"email":/phone|fax/i.test(a)?"tel":"birthDay"===a?"date":"text"},i.getFieldTranslationKey=function(a){return["ovh_contact_edit_label",_.snakeCase(a)].join("_")},i.formatedPhone=function(a){return arguments.length>0?i.ovhContactCtrl.contact.phone=a:h(i.ovhContactCtrl.contact.phone)},i.formatedCellPhone=function(a){return arguments.length>0?i.ovhContactCtrl.contact.cellPhone=a:h(i.ovhContactCtrl.contact.cellPhone)},i.forcePhoneFormat=function(a,c){b(function(){var b=$(a.target).intlTelInput("getSelectedCountryData");i.ovhContactCtrl.contact[c]!==b.dialCode&&i.ovhContactCtrl.contact[c]?_.startsWith(i.ovhContactCtrl.contact[c],b.dialCode)&&(i.ovhContactCtrl.contact[c]="+"+i.ovhContactCtrl.contact[c]):i.ovhContactCtrl.contact[c]=void 0})},i.$onInit=function(){return i.loading.init=!0,i.ovhContactCtrl.loading.load=!0,g(),d.getCreationRules().then(function(a){i.creationRules=a,i.ovhContactCtrl.manageOnInit()})["finally"](function(){i.loading.init=!1,i.ovhContactCtrl.loading.load=!1})}}]),function(){"use strict";angular.module("ovh-angular-contact").component("ovhContactEdit",{require:{ovhContactCtrl:"^ovhContact"},templateUrl:"edit/ovh-angular-contact-edit.html",controller:"OvhContactEditCtrl"})}(),angular.module("ovh-angular-contact").controller("OvhContactCtrl",["$timeout","ovhContact","OvhContact",function(a,b,c){"use strict";var d=this,e=null;d.loading={load:!1,init:!1},d.startContactCreation=function(){return e=d.contact,d.contact=new c,d.contact},d.stopContactCreation=function(){return d.contact=e,e=null,d.contact},d.manageOnInit=function(){if(d.initDeferred)return a(d.initDeferred.resolve)},d.$onInit=function(){if(d.loading.init=!0,d.onlyCreate="true"===d.onlyCreate,d.initDeferred&&_.isUndefined(d.initDeferred.promise))throw new Error("ovh-angular-contact: initDeferred must be a deferred object.");return d.onlyCreate&&d.startContactCreation(),b.loadTranslations()["finally"](function(){d.loading.init=!1})},d.$onDestroy=function(){d.contact&&d.contact.stopEdition(!0)}}]),function(){"use strict";angular.module("ovh-angular-contact").component("ovhContact",{transclude:!0,templateUrl:"ovh-angular-contact.html",controller:"OvhContactCtrl",bindings:{contact:"=ngModel",onlyCreate:"@ovhContactOnlyCreate",choiceOptions:"=?ovhContactChoiceOptions",initDeferred:"=?ovhContactInitDeferred"}})}(),function(){"use strict";angular.module("ovh-angular-contact").constant("CONTACT_EDITION",{SORTED_FIELDS_DEFAULT:{generalInformations:["gender","address.country","legalForm","firstName","lastName","nationality","language"],legal:["organisationType","organisationName","companyNationalIdentificationNumber","associationNationalIdentificationNumber","vat"],profile:["address.line1","address.line2","address.line3","address.otherDetails","address.zip","address.city","address.province","birthDay","birthZip","birthCity","birthCountry"],contacts:["email","emailConfirmation","nationalIdentificationNumber","phone","cellPhone","fax"]},ALWAYS_VISIBLE_FIELDS_DEFAULT:["address.country","legalForm","firstName","lastName","email","emailConfirmation","gender","nationality","organisationType","organisationName","companyNationalIdentificationNumber","vat","address.line1","address.line2","address.line3","address.otherDetails","address.zip","address.city","address.province","birthDay","birthZip","birthCity","birthCountry","nationalIdentificationNumber","phone","cellPhone","fax","language"]}).constant("CONTACT_PROTOTYPE_PATH",["organisationName","vat","spareEmail","email","birthDay","phone","cellPhone","fax","id","firstName","lastName","address.country","address.line1","address.line2","address.line3","address.otherDetails","address.zip","address.city","address.province","gender","language","organisationType","legalForm","birthCity","birthZip","birthCountry","nationality","nationalIdentificationNumber","companyNationalIdentificationNumber","emailConfirmation"]).constant("CONTACT_EMAIL_REGEX","^[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?.)+[a-zA-Z0-9]{2}(?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$")}(),angular.module("ovh-angular-contact").factory("OvhContact",["User","CONTACT_PROTOTYPE_PATH",function(a,b){"use strict";function c(a){a||(a={}),this.organisationName=a.organisationName,this.vat=a.vat,this.spareEmail=a.spareEmail,this.email=a.email,this.phone=a.phone,this.cellPhone=a.cellPhone,this.fax=a.fax,this.id=a.id,this.firstName=a.firstName,this.lastName=a.lastName,this.address=a.address||{country:void 0,line1:void 0,line2:void 0,line3:void 0,otherDetails:void 0,zip:void 0,city:void 0,province:void 0},this.gender=a.gender||"male",this.language=a.language||"fr_FR",this.organisationType=a.organisationType,this.legalForm=a.legalForm||"individual",this.nationality=a.nationality||"FR",this.nationalIdentificationNumber=a.nationalIdentificationNumber,this.companyNationalIdentificationNumber=a.companyNationalIdentificationNumber,this.birthCity=a.birthCity,this.birthZip=a.birthZip,this.birthCountry=a.birthCountry||"FR",this.birthDay=a.birthDay&&moment(new Date(a.birthDay)).isValid()?new Date(a.birthDay):void 0,this.inEdition=!1,this.saveForEdition=null,this.emailConfirmation=a.email,this.address&&!this.address.country&&(this.address.country="FR")}var d=function(a){var c={};return angular.forEach(b,function(b){"birthDay"===b?c.birthDay=angular.isDate(a.birthDay)?moment(a.birthDay).format("YYYY-MM-DD"):void 0:_.set(c,b,_.get(a,b))}),c};return c.prototype.save=function(){var b=this;return a.Contact().Lexi().save({contactId:b.id},d(b)).$promise.then(function(){return b})},c.prototype.create=function(){var b=this;return a.Contact().Lexi().create({},d(b)).$promise.then(function(a){return b.id=a.id,b})},c.prototype.startEdition=function(){var a=this;return a.inEdition=!0,a.saveForEdition={},angular.forEach(b,function(b){_.set(a.saveForEdition,b,angular.copy(_.get(a,b)))}),a},c.prototype.stopEdition=function(a){var c=this;return c.inEdition=!1,c.saveForEdition&&a&&angular.forEach(b,function(a){_.set(c,a,angular.copy(_.get(c.saveForEdition,a)))}),c.saveForEdition=null,c.inEdition=!1,c},c.prototype.hasChange=function(a){var c=this;return!!c.saveForEdition&&(a?_.get(c,a)!==_.get(c.saveForEdition,a):!!_.find(b,function(a){return c.hasChange(a)}))},c}]),angular.module("ovh-angular-contact").provider("ovhContact",function(){"use strict";var a=this,b="../bower_components/ovh-angular-contact/dist/ovh-angular-contact";a.setTranslationPath=function(a){return a&&(b=a),b},a.$get=["$q","$translate","$translatePartialLoader","OvhContact","User","CONTACT_EMAIL_REGEX",function(a,c,d,e,f,g){function h(){return m?a.when(m):f.Lexi().schema().$promise.then(function(a){return m=a})}function i(a){var b={line1:"address"},c={};return angular.forEach(_.keys(m.models["contact.Address"].properties),function(d){b[d]&&a.hasOwnProperty(b[d])?c[d]=a[b[d]]:a.hasOwnProperty(d)?c[d]=a[d]:c[d]=null}),c}function j(a){var b={organisationName:"organisation",lastName:"name",gender:"sex"},c={};return angular.forEach(_.keys(m.models["contact.Contact"].properties),function(d){if("address"===d)c.address=i(a);else if("birthDay"===d)if(new RegExp(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/).test(a[d])){var e=a[d].split("/");c[d]=e.reverse().join("-")}else c[d]=null;else b[d]&&(a.hasOwnProperty(b[d])||a.hasOwnProperty(b[d.toLowerCase()]))?c[d]=a[b[d]]||a[b[d.toLowerCase()]]||null:a.hasOwnProperty(d)||a.hasOwnProperty(d.toLowerCase())?c[d]=a[d]||a[d.toLowerCase()]||null:c[d]=null}),c}var k={},l=[],m=null;return k.loadTranslations=function(){return d.addPart(b),c.refresh()},k.addContact=function(a){var b=a instanceof e?a:new e(a);return l.push(b),b},k.getContactList=function(a){var b=this;return a&&(l=[]),f.Contact().Erika().query().expand().execute().$promise.then(function(a){var c=_.chain(a).map("value").reject(function(a){return _.some(l,{id:a.id})}).value();return _.forEach(c,function(a){b.addContact(a)}),l})},k.getCreationRules=function(){function a(d){return angular.forEach(d,function(e,f){if(angular.isDefined(b[e.fullType])&&b[e.fullType])if(angular.isArray(b[e.fullType]["enum"])){var h=b[e.fullType].id.replace(/Enum$/,"").toLowerCase();d[f].values=[],angular.forEach(b[e.fullType]["enum"],function(a){d[f].values.push({label:c.instant([["country","language"].indexOf(h)>-1?h:_.snakeCase("ovh_contact_edit_"+h),a].join("_")),value:a})})}else angular.isObject(b[e.fullType].properties)&&angular.forEach(a(b[e.fullType].properties),function(a,b){d[[f,b].join(".")]=a});"phone"===f?e.canBeNull=0:"email"===f&&(e.regularExpression=g)}),d}var b=null;return h().then(function(c){return b=c.models,a(b["contact.Contact"].properties)})},k.getConnectedUser=function(){return f.Lexi().get().$promise},k.convertConnectedUserToContact=function(){var a=this;return a.getConnectedUser().then(function(a){return h().then(function(){return new e(j(a))})})},k}]}),angular.module("ovh-angular-contact").run(["$templateCache",function(a){"use strict";a.put("choice/ovh-angular-contact-choice.html",'<div class=ovh-contact-choice><ui-select data-ng-model=$ctrl.ovhContactCtrl.contact data-theme=choice/templates data-remove-selected=false><ui-select-match placeholder="{{ \'ovh_contact_choice_select_contact\' | translate }}"><!-- SELECTED USER DISPLAY --><div class="dtable full-width"><!-- USER ICON --><div class="dtd right-space-m16"><div class=badge><i class="fa fa-user fa-5x"></i></div></div><!-- USER ICON --><!-- ADDRESS --><div class=dtd><address class="inline-block vertical-middle text-left no-space"><strong data-ng-bind="$ctrl.ovhContactCtrl.contact.firstName + \' \' + $ctrl.ovhContactCtrl.contact.lastName"></strong><div data-ng-bind=$ctrl.ovhContactCtrl.contact.address.line1></div><div data-ng-bind="$ctrl.ovhContactCtrl.contact.address.zip + \' \' + $ctrl.ovhContactCtrl.contact.address.city + \' - \' + $ctrl.ovhContactCtrl.contact.address.country"></div></address></div><!-- ADDRESS --><!-- AVAILABLE ACTIONS --><div class="dtd text-right"><button type=button class="btn btn-default btn-xs" data-translate-attr="{ title: \'ovh_contact_display_edit_contact\' }" data-ng-if=$ctrl.options.allowEdition data-ng-click=$ctrl.editContact()><i class="ovh-font ovh-font-editer"></i></button> <button type=button class="btn btn-default btn-xs" data-translate-attr="{ title: \'ovh_contact_display_add_contact\' }" data-ng-if=$ctrl.options.allowCreation data-ng-click=$ctrl.createContact()><i class="ovh-font ovh-font-ajouter"></i></button> <button type=button class="btn btn-default btn-xs" data-translate-attr="{ title: \'ovh_contact_display_change_contact\' }" data-ng-click=$select.toggle($event)><i class="ovh-font ovh-font-search"></i></button></div><!-- AVAILABLE ACTIONS --></div><!-- SELECTED USER DISPLAY --></ui-select-match><ui-select-choices data-repeat="contact in $ctrl.searchInList($select.search) track by contact.id"><div ng-bind-html="contact.firstName + \' \' + contact.lastName"></div><small data-ng-bind=contact.address.line1></small><br><small data-ng-bind="contact.address.zip + \' \' + contact.address.city + \' - \' + contact.address.country"></small></ui-select-choices></ui-select></div>'),a.put("choice/templates/match.tpl.html",'<div class="ui-select-match form-control clearfix" data-ng-disabled=$select.disabled><div class=full-width><div data-ng-hide=$select.isEmpty() class=ui-select-match-text data-ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" data-ng-transclude=""></div></div></div>'),a.put("choice/templates/select.tpl.html",'<div class="ui-select-container ovh-contact-select ui-select-bootstrap clearfix" data-ng-class="{open: $select.open}"><div class="ui-select-match clearfix"></div><div class="ui-select-dropdown ui-select-dropdown-container dropdown" data-ng-class="{ open: $select.open }" data-ng-show=$select.open><div class=search-container><input type=search autocomplete=off tabindex=-1 aria-expanded=true aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="form-control ui-select-search" data-ng-class="{ \'ui-select-search-hidden\' : !$select.searchEnabled }" data-ng-model=$select.search data-ng-show=$select.open placeholder={{$select.placeholder}}></div><div class=ui-select-choices></div><div class=ui-select-no-choice></div></div></div>'),a.put("edit/ovh-angular-contact-edit.html",'<form class="ovh-contact-edit form-horizontal ovh-form-flat" data-ng-submit=$ctrl.saveContact() name=ovhContactEdit><div data-ng-if=$ctrl.saveError class="alert alert-danger" role=alert><i class="fa fa-lg fa-warning"></i> <span data-translate=ovh_contact_edit_save_error data-translate-values="{ message: $ctrl.saveError.data.message }"></span></div><p data-translate=ovh_contact_edit_mandatory_fields></p><fieldset data-ng-repeat="(fieldset, fields) in $ctrl.sortedFieldsByCountry track by $index"><legend data-translate="{{ \'ovh_contact_edit_fieldset_\' + fieldset }}"></legend><div data-ng-repeat="field in fields track by $index"><div data-ng-if=$ctrl.isVisibleField(field) data-ng-switch=field><!-- country --><div class=form-group data-ng-switch-when=address.country><label for=country class=col-xs-12>{{ (\'ovh_contact_edit_label_country\' | translate) + ($ctrl.creationRules["address.country"].canBeNull ? \'\' : \' *\') }}</label><div class="col-xs-12 col-md-6"><select class=form-control name=country id=country data-ng-options="country.value as country.label for country in $ctrl.creationRules[\'address.country\'].values | orderBy:\'label\'" data-ng-model=$ctrl.ovhContactCtrl.contact.address.country data-ng-required=!$ctrl.creationRules.address.country.canBeNull></select></div></div><!-- legalform --><div class=form-group data-ng-switch-when=legalForm><label for=legalform class=col-xs-12>{{ (\'ovh_contact_edit_label_legal_form\' | translate) + ($ctrl.creationRules.legalform.canBeNull ? \'\' : \' *\') }}</label><div class="col-xs-12 col-md-6"><select class=form-control name=legalform id=legalform data-ng-options="item.value as item.label | translate for item in $ctrl.creationRules[\'legalForm\'].values" data-ng-model="$ctrl.ovhContactCtrl.contact[\'legalForm\']" data-ng-required=!$ctrl.creationRules.legalForm.canBeNull></select></div></div><!-- birthDay --><div class=form-group data-ng-switch-when=birthDay><div flat-input-container><label class=col-xs-12 for=birthDay>{{ (\'ovh_contact_edit_label_birth_day\' | translate) + ($ctrl.creationRules.birthDay.canBeNull ? \'\' : \' *\') }}</label><div class="col-xs-12 col-md-6"><input class=form-control id=birthDay name=birthDay readonly placeholder="{{ (\'ovh_contact_edit_label_birth_day\' | translate) + ($ctrl.creationRules.birthDay.canBeNull ? \'\' : \' *\') }}" data-ng-model=$ctrl.ovhContactCtrl.contact.birthDay data-ng-pattern=$ctrl.creationRules.birthDay.regularExpression data-ng-required=!$ctrl.creationRules.birthDay.canBeNull data-ng-focus="$ctrl.datepicker.open = true" data-uib-datepicker-popup="{{ $ctrl.datepicker.format }}" data-datepicker-mode=$ctrl.datepicker.mode data-datepicker-options=$ctrl.datepicker.options data-show-button-bar=false data-is-open=$ctrl.datepicker.open></div></div></div><!-- emailConfirmation --><div class=form-group data-ng-switch-when=emailConfirmation><div flat-input-container><label class=col-xs-12 for=email_confirmation>{{ (\'ovh_contact_edit_label_email_confirmation\' | translate) + ($ctrl.creationRules.email.canBeNull ? \'\' : \' *\') }}</label><div class="col-xs-12 col-md-6"><input type=email class=form-control id=email_confirmation name=email_confirmation placeholder="{{ (\'ovh_contact_edit_label_email_confirmation\' | translate) + ($ctrl.creationRules.email.canBeNull ? \'\' : \' *\') }}" data-ng-model=$ctrl.ovhContactCtrl.contact.emailConfirmation autocomplete=false data-ng-required=!$ctrl.creationRules.email.canBeNull data-ng-pattern=$ctrl.creationRules.email.regularExpression data-match=$ctrl.ovhContactCtrl.contact.email></div><div data-ng-messages=ovhContactEdit[field].$error data-ng-show="ovhContactEdit[field].$dirty && ovhContactEdit[field].$touched" role=alert class=col-xs-12><label for="{{ field }}" data-ng-message=required data-translate=ovh_contact_edit_mandatory_field></label><label for="{{ field }}" data-ng-message=pattern data-translate=ovh_contact_edit_invalid_email></label></div></div></div><!-- PHONE --><div class=form-group data-ng-switch-when=phone><label for=phone class=col-xs-12>{{ (\'ovh_contact_edit_label_phone\' | translate) + ($ctrl.creationRules.phone.canBeNull ? \'\' : \' *\') }}</label><div class="col-xs-12 col-md-6"><input international-phone-number data-number-type=FIXED_LINE data-national-mode=false data-default-country="{{ $ctrl.ovhContactCtrl.contact.address.country }}" data-preferred-countries="" data-ng-model=$ctrl.formatedPhone data-ng-model-options="{ getterSetter: true }" data-ng-blur="$ctrl.forcePhoneFormat($event, field)" name=phone id=phone class=form-control data-ng-required=!$ctrl.creationRules.phone.canBeNull></div><div data-ng-messages=ovhContactEdit.phone.$error data-ng-show="ovhContactEdit.phone.$dirty && ovhContactEdit.phone.$touched" role=alert class=col-xs-12><label for="{{ field }}" data-ng-message=required data-translate=ovh_contact_edit_mandatory_field></label><label for="{{ field }}" data-ng-message=internationalPhoneNumber data-translate=ovh_contact_edit_invalid_phone></label></div></div><!-- CELL PHONE --><div class=form-group data-ng-switch-when=cellPhone><label for=cellphone class=col-xs-12>{{ (\'ovh_contact_edit_label_cell_phone\' | translate) + ($ctrl.creationRules.cellPhone.canBeNull ? \'\' : \' *\') }}</label><div class="col-xs-12 col-md-6"><input international-phone-number data-national-mode=false data-allow-dropdown=false data-default-country="{{ $ctrl.ovhContactCtrl.contact.address.country }}" data-preferred-countries="" data-ng-model=$ctrl.formatedCellPhone data-ng-model-options="{ getterSetter: true }" data-ng-blur="$ctrl.forcePhoneFormat($event, field)" name=cellphone id=cellphone class=form-control data-ng-required=!$ctrl.creationRules.cellPhone.canBeNull></div><div data-ng-messages=ovhContactEdit.cellphone.$error data-ng-show="ovhContactEdit.cellphone.$dirty && ovhContactEdit.cellphone.$touched" role=alert class=col-xs-12><label for=cellphone data-ng-message=required data-translate=ovh_contact_edit_mandatory_field></label><label for=cellphone data-ng-message=internationalPhoneNumber data-translate=ovh_contact_edit_invalid_phone></label></div></div><!-- others --><div data-ng-switch-default data-ng-switch=!$ctrl.creationRules[field].values><div data-ng-switch-when=true data-ng-switch="field.indexOf(\'address\') > -1"><!-- SPECIAL FOR ADDRESS FIELD BECAUSE NGMODEL CAN\'T ACCESS TO contact[\'address.city\'] --><div data-ng-switch-when=true flat-input-container class=form-group><label for={{field}} class=col-xs-12>{{ ($ctrl.getFieldTranslationKey(field) | translate) + ($ctrl.creationRules[field].canBeNull ? \'\' : \' *\') }}</label><div class="col-xs-12 col-md-6"><input type={{$ctrl.getFieldType(field)}} class=form-control id={{field}} name={{field}} placeholder="{{ ($ctrl.getFieldTranslationKey(field) | translate) + ($ctrl.creationRules[field].canBeNull ? \'\' : \' *\') }}" data-ng-model="$ctrl.ovhContactCtrl.contact.address[field.split(\'.\')[1]]" data-ng-required=!$ctrl.creationRules[field].canBeNull data-ng-pattern=$ctrl.creationRules[field].regularExpression></div><div data-ng-messages=ovhContactEdit[field].$error data-ng-show="ovhContactEdit[field].$dirty && ovhContactEdit[field].$touched" role=alert class=col-xs-12><label for="{{ field }}" data-ng-message=required data-translate=ovh_contact_edit_mandatory_field></label><label for="{{ field }}" data-ng-message=pattern data-translate="{{ \'ovh_contact_edit_invalid_\' + field }}"></label></div></div><!-- SPECIAL FOR ADDRESS FIELD --><div data-ng-switch-default flat-input-container class=form-group><label for={{field}} class=col-xs-12>{{ ($ctrl.getFieldTranslationKey(field) | translate) + ($ctrl.creationRules[field].canBeNull ? \'\' : \' *\') }}</label><div class="col-xs-12 col-md-6"><input type={{$ctrl.getFieldType(field)}} class=form-control id={{field}} name={{field}} placeholder="{{ ($ctrl.getFieldTranslationKey(field) | translate) + ($ctrl.creationRules[field].canBeNull ? \'\' : \' *\') }}" data-ng-model=$ctrl.ovhContactCtrl.contact[field] data-ng-required=!$ctrl.creationRules[field].canBeNull data-ng-pattern=$ctrl.creationRules[field].regularExpression></div><div data-ng-messages=ovhContactEdit[field].$error data-ng-show="ovhContactEdit[field].$dirty && ovhContactEdit[field].$touched" role=alert class=col-xs-12><label for="{{ field }}" data-ng-message=required data-translate=ovh_contact_edit_mandatory_field></label><label for="{{ field }}" data-ng-message=pattern data-translate="{{ \'ovh_contact_edit_invalid_\' + field }}"></label></div></div></div><div class=form-group data-ng-switch-default=""><label for={{field}} class=col-xs-12>{{ ($ctrl.getFieldTranslationKey(field) | translate) + ($ctrl.creationRules[field].canBeNull ? \'\' : \' *\') }}</label><div class="col-xs-12 col-md-6"><select class=form-control name={{field}} id={{field}} data-ng-options="item.value as item.label for item in $ctrl.creationRules[field].values | orderBy:\'label\'" data-ng-model=$ctrl.ovhContactCtrl.contact[field] data-ng-required=!$ctrl.creationRules.country.canBeNull></select></div></div></div></div></div></fieldset><div class="footer-actions row"><div class="col-xs-12 col-md-6"><button type=submit class="btn btn-primary" data-translate="{{ $ctrl.ovhContactCtrl.contact.id ? \'ovh_contact_edit_action_edit\' : \'ovh_contact_edit_action_create\' }}" data-ng-disabled="ovhContactEdit.$invalid || !$ctrl.ovhContactCtrl.contact.hasChange()"></button> <button type=button class="btn btn-default" data-translate=ovh_contact_edit_action_cancel data-ng-click=$ctrl.cancelEdition()></button></div></div></form>'),a.put("ovh-angular-contact.html",'<div class=ovh-contact><!-- TRANSCLUDE CUSTOM LOADER WHEN INIT --><div data-ng-show="$ctrl.loading.load || $ctrl.loading.init" data-ng-transclude></div><!-- TRANSCLUDE CUSTOM LOADER WHEN INIT --><div data-ng-show="!$ctrl.loading.load && !$ctrl.loading.init"><ovh-contact-choice data-ng-if="!$ctrl.onlyCreate && !$ctrl.contact.inEdition" data-ovh-contact-choice-filter=$ctrl.choiceOptions.filter data-ovh-contact-choice-custom-list=$ctrl.choiceOptions.customList data-ovh-contact-choice-options=$ctrl.choiceOptions.options></ovh-contact-choice><ovh-contact-edit data-ng-if="$ctrl.onlyCreate || $ctrl.contact.inEdition"></ovh-contact-edit></div></div>')}]);